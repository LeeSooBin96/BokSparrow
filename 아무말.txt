닉네임 등록된 순간부터 서버에서 오는 알림 메시지 실시간으로 수신해야해서
친구 기능부터는 수신부 스레드로 넘겨야할듯!

닉넴 등록 -> 수신 스레드 이동--이거 잘넘겨야함 메시지 수신시마다 스레드가 작동하게!
친구 기능은 동기적으로 메뉴 입력받아서 진행 --친구 추가 혹은 찾기 닉네임 입력 도중 오는 알림은 막아야함
그 사이 오는 서버로부터 메시지에 대한 대응은 실시간으로 되면됨


나중에 채팅에 있어서도 메시지 입력 도중 수신 스레드 작동 못하게 해야함

만약 이게 싫으면 입력중인 메시지를 저장할 수 있는 로직을 정하면됨

끄으으ㅡㅇㅇ 잘할 수 있겠지

이 실시간 업데이트 기능 추가 되면 친구 승낙 기능도 금방일 것 같은데 도전해보자

일단 친구 기능 완성 시키고!!! 오늘 목표니까
라고 하려했는데 생각해보니 나중에 스레드로 고치기 힘들것같아 지금부터 작업

왜 스레드 넣자마자 말썽이지
아무래도 동기화 문제인것같은데 콘솔창은 하나니까 스레드랑 메인이랑 겹치면서 생기는 문제일까
하...어렵네
콘솔도 자원인데 왜 뮤텍스도 안걸리고 하..아ㅏ아ㅏㅏㅏ

차근차근 다시 해보자

클래스 객체가 지역변수여서 함수밖에서는 활성화가 되지 않아서? 스레드는
아
데이터영역에서 작동하니까 스택에있는 지역변수에는 전달이 되지 않는다
그러면 스레드에서 지역변수로 선언된 클래스 객체를 다룰거였으면 값복사를 해야했네...하
근데 소멸자 호출되면 서버와 연결이 끊기니 결국 답은 전역으로 객체를 호출하는것뿐
이게 맞네

이제 그러면 클라이언트 수신부 스레드 연결했으니 차근차근 다시 친구 기능 연결해보자
오늘 이것까지만 마무리하고 자자
내일은 채팅!

친구 추가 기능은 우선 완료! 나중에 승낙 기능 넣고 싶으면 넣지뭐~
밥먹고 친구 찾기 추가! 채팅은 내일 고민합시다

멀티 프로세스...는 쓴다면 아마 파일전송? 근데 굳이? 스레드로 넘겨도 될것같긴한데 아닐지도
파일 송수신하는동안 채팅도 하려면 소켓을 분리시켜야하니까 근데 그러면 udp로 파일 던져야하나?
====================================================================================================
이제 채팅을 고민해보자
우선 유저파트 클래스 분리를 할까 --완료(서버만 클라이언트는...어디부터 어디까지 해야할지 아직 모르겠음)

우선 채팅을 어떻게 진행할거지?
채팅코드를 정해서 그코드로 전송되는 메시지는 해당 채팅코드와 연결된 유저리스트에게 전송되도록
그러면 일단 채팅방 구조체가 필요하겠지?
저장할 정보는 채팅방 이름, 채팅방 코드, 채팅방 화이트리스트, ...또 뭐필요할까?

우선은 이렇게?

채팅방은 바로 클래스로 사용하자 나중에 분리 쉽게

위에는 서버측 입장이고 클라이언트는 뭐가 필요하니
우선 채팅을 하거나 귓속말?

채팅 하는게  -> 친구 선택했을 때랑 채팅방 입장 두 방법이 있는데
친구 선택 -> 귓속말 혹은 채팅방 입장을 하자 (귓속말은 일방적 채팅은 양방향)
채팅방 입장 -> 채팅 코드 입력해 들어가게
우선은 여기까지 차근차근 해봐야하는데 귀찮...

닉네임 공백 입력 막음...;;

귓말 왜 한명만 보여 --고침!

이제 대망의 채팅이다...
채팅방 생성 / 기존 채팅방 입장으로 나눌것
채팅방 생성 -> 채팅 코드 정하기 -> 채팅 멤버 정하기 -> 서버에서 채팅방 생성 -> 채팅방 입장
기존 채팅방 입장 -> 채팅 코드 입력 -> 채팅방 입장

채팅 무사히 구현 완료하면 파일 송수신 시도 해보고

만약 오늘 이 모든걸 다한다면??? 나는 이제 섬세한 부분 고치고? 추가 기능들 하나씩 넣어보고?
수욜은 문서작업 합시당

일단 친구랑 1대1채팅방 생성부
서버에 채팅코드 검사 받기 => 보낼메시지 정해야함
메시지길이:CreateOtO:채팅코드 일케 할까
보내면 서버는 이에 대해 중복검사 하려면 채팅방 구조체 필요하고? 하나씩 추가해보기

//채팅 코드 정하고?
            //서버에 채팅 코드 보내서 중복검사 받고?
            //서버 수신부에서 나머지 작업을 해야하므로?
            //여기는 일단 채팅코드를 받아 서버에 보내볼까요?
            //갑자기 고민되는 부분 지금 짠대로 가면 채팅방 목록 띄우기가 될텐데
            //코드를 유저가 정하게 해야하나? 서버가 짜주게 할까 바로 입장되게 할까
            //고민좀 하자
            
            //여기 채팅코드 보내면 화면 클리어 되는데...;; 그러면 안되는데 어떡하지
            //채팅 코드 생성일때는 저 친구목록 인풋루프로 안돌아가게 
채팅방 서버가 생성해주고 멤버들에게 코드 부여하게 하는것으로 수정
고로 채팅방은 생성 없이 입장으로
친구 선택하고 채팅방 들어가면 1:1
친구 목록창에서 채팅방 들어가려하면 본인이 속한 모든 채팅방 목록 출력
으음...점점 할일이 커져요???

채팅하기전에 클라이언트 클래스 분리 시작 -- 완료

친구 선택하고 1:1채팅방 서버에 요청 메시지가 고
없으면 서버에서 채팅방 생성 있으면 기존 채팅방으로 입장하게
여기까지 해보자

채팅방 입장은...확인 메시지를 보낼까 아니면 서버에 입장 메시지만 보내고 바로 통신(채팅)할까
아 생각해보니까 친구 닉네임 필요해서 저쪽 클래스랑 연동해야하네
그러면 서버 메인에서 어느 정도 처리를 해야함

그냥 내 닉네임이랑 친구 닉네임 보내면 방 확인(기존방 존재 여부 없으면 생성)하고 입장하게 하는것 하나
--우선 여기서 없으면 생성 있으면 있는방 채팅코드 클라이언트에 전달하는거 구현하자

방 목록에서 목록 인덱스 보내면 인덱스에 해당하는 방 입장하게 하는것 하나 이렇게 해볼까

머리 터질것 같당

